<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FM-Base Component Test Suite</title>
    <link rel="stylesheet" href="styles/main.css">
    <style>
        body {
            background: var(--neutral-900);
            color: var(--neutral-100);
            font-family: system-ui, -apple-system, sans-serif;
            padding: 20px;
            overflow-y: auto;
            min-height: 100vh;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .test-section {
            background: var(--neutral-800);
            border: 1px solid var(--neutral-700);
            border-radius: 8px;
            padding: 20px;
        }
        .test-section h2 {
            color: var(--primary-300);
            margin-bottom: 20px;
            font-size: 18px;
        }
        .test-container {
            background: var(--neutral-850);
            padding: 20px;
            border-radius: 4px;
            min-height: 200px;
        }
        .status {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            display: inline-block;
            margin-left: 10px;
        }
        .status.success { background: #00ff8830; color: #00ff88; }
        .status.error { background: #ff444430; color: #ff4444; }
        .status.loading { background: #ffaa0030; color: #ffaa00; }
    </style>
</head>
<body>
    <h1>FM-Base Component Test Suite</h1>
    
    <div class="test-grid">
        <!-- Visualization Components -->
        <div class="test-section">
            <h2>Attribute Circles <span id="circles-status" class="status loading">Loading...</span></h2>
            <div id="attribute-circles" class="test-container"></div>
        </div>
        
        <div class="test-section">
            <h2>Pizza Chart <span id="pizza-status" class="status loading">Loading...</span></h2>
            <div id="pizza-chart" class="test-container"></div>
        </div>
        
        <div class="test-section">
            <h2>Bar Chart <span id="bar-status" class="status loading">Loading...</span></h2>
            <div id="bar-chart" class="test-container"></div>
        </div>
        
        <!-- Player Analysis Components -->
        <div class="test-section" style="grid-column: span 2;">
            <h2>Player Profile <span id="profile-status" class="status loading">Loading...</span></h2>
            <div id="player-profile" class="test-container"></div>
        </div>
        
        <div class="test-section">
            <h2>Archetype Classifier <span id="archetype-status" class="status loading">Loading...</span></h2>
            <div id="archetype-classifier" class="test-container"></div>
        </div>
        
        <div class="test-section" style="grid-column: span 3;">
            <h2>Player Comparison <span id="comparison-status" class="status loading">Loading...</span></h2>
            <div id="comparison-tool" class="test-container"></div>
        </div>
        
        <!-- UI/UX Framework Tests -->
        <div class="test-section">
            <h2>Animation Test <span id="animation-status" class="status loading">Loading...</span></h2>
            <div id="animation-test" class="test-container">
                <div class="card" style="padding: 20px; background: var(--neutral-700);">
                    Test Card for Animations
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>Layout Manager <span id="layout-status" class="status loading">Loading...</span></h2>
            <div id="layout-test" class="test-container"></div>
        </div>
        
        <div class="test-section">
            <h2>Responsive System <span id="responsive-status" class="status loading">Loading...</span></h2>
            <div id="responsive-test" class="test-container"></div>
        </div>
    </div>

    <!-- Load all components -->
    <script src="components/visualizations/attribute-circle.js"></script>
    <script src="components/visualizations/pizza-chart.js"></script>
    <script src="components/visualizations/bar-chart.js"></script>
    <script src="components/player/player-profile.js"></script>
    <script src="components/player/archetype-classifier.js"></script>
    <script src="components/player/comparison-tool.js"></script>
    <script src="components/animations/animation-controller.js"></script>
    <script src="components/layout/layout-manager.js"></script>
    <script src="components/layout/responsive-system.js"></script>
    
    <script>
        // Test data
        const testPlayer1 = {
            id: 1,
            name: 'Bruno Fernandes',
            position: 'AMC',
            age: 29,
            nationality: 'Portugal',
            club: 'Manchester United',
            number: 8,
            attributes: {
                technical: {
                    crossing: 14,
                    dribbling: 13,
                    finishing: 15,
                    first_touch: 16,
                    heading: 11,
                    long_shots: 18,
                    passing: 17,
                    technique: 16
                },
                mental: {
                    aggression: 12,
                    anticipation: 15,
                    bravery: 13,
                    composure: 15,
                    concentration: 16,
                    decisions: 16,
                    determination: 18,
                    flair: 17,
                    leadership: 17,
                    off_the_ball: 15,
                    positioning: 14,
                    teamwork: 16,
                    vision: 18,
                    work_rate: 17
                },
                physical: {
                    acceleration: 12,
                    agility: 13,
                    balance: 13,
                    jumping: 11,
                    natural_fitness: 15,
                    pace: 13,
                    stamina: 16,
                    strength: 12
                }
            },
            performance: {
                appearances: 28,
                goals: 12,
                assists: 9,
                rating: 7.4,
                keyPasses: 2.3,
                passAccuracy: 85
            },
            value: '€65M',
            contract: '2027'
        };
        
        const testPlayer2 = {
            id: 2,
            name: 'Marcus Rashford',
            position: 'AML',
            age: 26,
            nationality: 'England',
            club: 'Manchester United',
            number: 10,
            attributes: {
                technical: {
                    crossing: 13,
                    dribbling: 16,
                    finishing: 16,
                    first_touch: 15,
                    heading: 10,
                    long_shots: 14,
                    passing: 13,
                    technique: 15
                },
                mental: {
                    aggression: 11,
                    anticipation: 14,
                    bravery: 14,
                    composure: 14,
                    concentration: 13,
                    decisions: 14,
                    determination: 16,
                    flair: 16,
                    leadership: 13,
                    off_the_ball: 16,
                    positioning: 15,
                    teamwork: 14,
                    vision: 14,
                    work_rate: 15
                },
                physical: {
                    acceleration: 17,
                    agility: 16,
                    balance: 15,
                    jumping: 12,
                    natural_fitness: 16,
                    pace: 18,
                    stamina: 15,
                    strength: 13
                }
            },
            performance: {
                appearances: 30,
                goals: 18,
                assists: 6,
                rating: 7.6,
                keyPasses: 1.8,
                passAccuracy: 82
            },
            value: '€85M',
            contract: '2028'
        };
        
        // Component tests
        function testComponents() {
            // Test Attribute Circles
            try {
                const circles = AttributeCircle.createMultiple(
                    document.getElementById('attribute-circles'),
                    [
                        { label: 'Passing', value: 17 },
                        { label: 'Vision', value: 18 },
                        { label: 'Technique', value: 16 },
                        { label: 'Long Shots', value: 18 },
                        { label: 'Leadership', value: 17 },
                        { label: 'Work Rate', value: 17 }
                    ]
                );
                document.getElementById('circles-status').className = 'status success';
                document.getElementById('circles-status').textContent = 'Success';
            } catch (e) {
                console.error('Attribute Circles error:', e);
                document.getElementById('circles-status').className = 'status error';
                document.getElementById('circles-status').textContent = 'Error';
            }
            
            // Test Pizza Chart
            try {
                const pizzaChart = new PizzaChart({
                    container: '#pizza-chart',
                    data: [
                        { label: 'Technical', value: 15.5, color: '#00ff88' },
                        { label: 'Mental', value: 15.8, color: '#00a8cc' },
                        { label: 'Physical', value: 13.2, color: '#ff6b35' }
                    ],
                    type: 'doughnut',
                    size: 180,
                    showLegend: true
                });
                document.getElementById('pizza-status').className = 'status success';
                document.getElementById('pizza-status').textContent = 'Success';
            } catch (e) {
                console.error('Pizza Chart error:', e);
                document.getElementById('pizza-status').className = 'status error';
                document.getElementById('pizza-status').textContent = 'Error';
            }
            
            // Test Bar Chart
            try {
                const barChart = new BarChart({
                    container: '#bar-chart',
                    data: [
                        { label: 'Goals', value: 12 },
                        { label: 'Assists', value: 9 },
                        { label: 'Key Passes', value: 64 },
                        { label: 'Shots', value: 85 }
                    ],
                    orientation: 'horizontal',
                    height: 180
                });
                document.getElementById('bar-status').className = 'status success';
                document.getElementById('bar-status').textContent = 'Success';
            } catch (e) {
                console.error('Bar Chart error:', e);
                document.getElementById('bar-status').className = 'status error';
                document.getElementById('bar-status').textContent = 'Error';
            }
            
            // Test Player Profile
            try {
                const profile = new PlayerProfile(testPlayer1);
                profile.render(document.getElementById('player-profile'));
                document.getElementById('profile-status').className = 'status success';
                document.getElementById('profile-status').textContent = 'Success';
            } catch (e) {
                console.error('Player Profile error:', e);
                document.getElementById('profile-status').className = 'status error';
                document.getElementById('profile-status').textContent = 'Error';
            }
            
            // Test Archetype Classifier
            try {
                const classifier = new ArchetypeClassifier();
                classifier.render(document.getElementById('archetype-classifier'), testPlayer1);
                document.getElementById('archetype-status').className = 'status success';
                document.getElementById('archetype-status').textContent = 'Success';
            } catch (e) {
                console.error('Archetype Classifier error:', e);
                document.getElementById('archetype-status').className = 'status error';
                document.getElementById('archetype-status').textContent = 'Error';
            }
            
            // Test Comparison Tool
            try {
                const comparison = new ComparisonTool();
                comparison.addPlayer(testPlayer1);
                comparison.addPlayer(testPlayer2);
                comparison.render(document.getElementById('comparison-tool'));
                document.getElementById('comparison-status').className = 'status success';
                document.getElementById('comparison-status').textContent = 'Success';
            } catch (e) {
                console.error('Comparison Tool error:', e);
                document.getElementById('comparison-status').className = 'status error';
                document.getElementById('comparison-status').textContent = 'Error';
            }
            
            // Test Animation Controller
            try {
                const testCard = document.querySelector('#animation-test .card');
                window.fmAnimator.animateCardEntry(testCard, 'bounce');
                document.getElementById('animation-status').className = 'status success';
                document.getElementById('animation-status').textContent = 'Success';
            } catch (e) {
                console.error('Animation Controller error:', e);
                document.getElementById('animation-status').className = 'status error';
                document.getElementById('animation-status').textContent = 'Error';
            }
            
            // Test Layout Manager
            try {
                const layoutInfo = window.fmLayout.calculateOptimalCardSize({
                    contentType: 'player',
                    textLength: 200,
                    hasImage: true,
                    priority: 'high'
                });
                document.getElementById('layout-test').innerHTML = `
                    <div style="color: var(--neutral-300);">
                        <p>Optimal Size: ${layoutInfo.width}x${layoutInfo.height}</p>
                        <p>Columns: ${layoutInfo.gridColumns}</p>
                        <p>Rows: ${layoutInfo.gridRows}</p>
                    </div>
                `;
                document.getElementById('layout-status').className = 'status success';
                document.getElementById('layout-status').textContent = 'Success';
            } catch (e) {
                console.error('Layout Manager error:', e);
                document.getElementById('layout-status').className = 'status error';
                document.getElementById('layout-status').textContent = 'Error';
            }
            
            // Test Responsive System
            try {
                const deviceInfo = window.fmResponsive.getDeviceInfo();
                document.getElementById('responsive-test').innerHTML = `
                    <div style="color: var(--neutral-300);">
                        <p>Breakpoint: ${window.fmResponsive.currentBreakpoint}</p>
                        <p>Touch: ${deviceInfo.hasTouch ? 'Yes' : 'No'}</p>
                        <p>Performance: ${window.fmResponsive.performanceTier}</p>
                        <p>Grid: ${window.fmResponsive.gridColumns}x${window.fmResponsive.gridRows}</p>
                    </div>
                `;
                document.getElementById('responsive-status').className = 'status success';
                document.getElementById('responsive-status').textContent = 'Success';
            } catch (e) {
                console.error('Responsive System error:', e);
                document.getElementById('responsive-status').className = 'status error';
                document.getElementById('responsive-status').textContent = 'Error';
            }
        }
        
        // Run tests when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', testComponents);
        } else {
            testComponents();
        }
    </script>
</body>
</html>